<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AutoVerif QC — Demo Rapport Vehiculaire</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/ScrollTrigger.min.js"></script>
    <style>
        :root {
            --primary: #080e1a;
            --primary-light: #111b2e;
            --accent: #00b4d8;
            --accent-dark: #0096b7;
            --gold: #f4a61c;
            --gold-dark: #d4910a;
            --red: #e63946;
            --green: #2a9d8f;
            --bg: #0b1120;
            --bg-light: #0f1729;
            --card: rgba(255,255,255,0.04);
            --text: #e8ecf2;
            --text-light: #8892a4;
            --border: rgba(255,255,255,0.08);
        }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Inter', -apple-system, sans-serif;
            background: var(--bg); color: var(--text);
            line-height: 1.6; overflow-x: hidden;
        }

        /* NAV */
        nav {
            position: fixed; top: 0; left: 0; right: 0; z-index: 1000;
            background: rgba(15, 43, 70, 0.95);
            backdrop-filter: blur(20px);
            border-bottom: 1px solid rgba(255,255,255,0.08);
            padding: 0 40px; display: flex; align-items: center;
            justify-content: space-between; height: 64px;
        }
        .nav-logo {
            font-size: 1.6rem; font-weight: 900; color: white;
            display: flex; align-items: center; gap: 10px; text-decoration: none;
        }
        .nav-logo .logo-icon {
            width: 40px; height: 40px; flex-shrink: 0;
        }
        .nav-logo span { color: var(--accent); }
        .nav-right { display: flex; gap: 12px; }
        .nav-link {
            color: rgba(255,255,255,0.6); text-decoration: none;
            font-size: 0.85rem; font-weight: 500; padding: 6px 14px;
            border-radius: 8px; transition: all 0.3s;
        }
        .nav-link:hover { color: white; background: rgba(255,255,255,0.08); }
        .nav-badge {
            background: var(--gold); color: var(--primary);
            padding: 6px 16px; border-radius: 20px;
            font-size: 0.8rem; font-weight: 700; text-decoration: none;
        }

        /* PARTICLES CANVAS */
        #particles {
            position: fixed; inset: 0; z-index: 0; pointer-events: none;
        }

        /* SCANNER HERO */
        .scanner-hero {
            min-height: 100vh; position: relative; z-index: 1;
            background: linear-gradient(160deg, #060e1a 0%, var(--primary) 40%, #0d2137 100%);
            display: flex; align-items: center; justify-content: center;
            padding: 100px 20px 60px; overflow: hidden;
        }
        .scanner-hero::before {
            content: ''; position: absolute; inset: 0;
            background:
                radial-gradient(ellipse at 20% 50%, rgba(0,180,216,0.12) 0%, transparent 50%),
                radial-gradient(ellipse at 80% 20%, rgba(244,166,28,0.08) 0%, transparent 40%),
                radial-gradient(ellipse at 50% 80%, rgba(42,157,143,0.06) 0%, transparent 40%);
        }
        .glow-orb {
            position: absolute; border-radius: 50%; filter: blur(80px);
            opacity: 0.15; pointer-events: none;
        }
        .glow-orb.blue { width: 400px; height: 400px; background: var(--accent); top: 10%; left: 5%; }
        .glow-orb.gold { width: 300px; height: 300px; background: var(--gold); bottom: 10%; right: 10%; }

        .scanner-wrap {
            position: relative; max-width: 580px; width: 100%; z-index: 2;
        }
        .scanner-header {
            text-align: center; margin-bottom: 40px;
        }
        .scanner-header .badge {
            display: inline-flex; align-items: center; gap: 8px;
            background: rgba(0,180,216,0.12); border: 1px solid rgba(0,180,216,0.25);
            padding: 6px 18px; border-radius: 30px; font-size: 0.8rem;
            color: var(--accent); font-weight: 600; margin-bottom: 20px;
        }
        .badge .live-dot {
            width: 7px; height: 7px; border-radius: 50%; background: var(--green);
            animation: blink 2s infinite;
        }
        @keyframes blink { 0%,100%{opacity:1}50%{opacity:.3} }
        .scanner-header h1 {
            font-size: clamp(1.8rem,4.5vw,2.6rem); font-weight: 900;
            color: white; line-height: 1.1; margin-bottom: 14px; letter-spacing: -1px;
        }
        .scanner-header h1 .grad {
            background: linear-gradient(135deg, var(--accent), var(--gold));
            -webkit-background-clip: text; -webkit-text-fill-color: transparent;
        }
        .scanner-header p { color: rgba(255,255,255,0.5); font-size: 0.95rem; }

        /* GLASS CARD */
        .glass-card {
            background: rgba(255,255,255,0.04);
            border: 1px solid rgba(255,255,255,0.08);
            border-radius: 24px; padding: 36px;
            backdrop-filter: blur(24px);
            box-shadow: 0 8px 40px rgba(0,0,0,0.3), inset 0 1px 0 rgba(255,255,255,0.06);
        }
        .input-label {
            display: block; color: rgba(255,255,255,0.5); font-size: 0.72rem;
            font-weight: 700; text-transform: uppercase; letter-spacing: 1.5px;
            margin-bottom: 8px;
        }
        .vin-input {
            width: 100%; padding: 18px 20px;
            background: rgba(255,255,255,0.06);
            border: 2px solid rgba(255,255,255,0.1);
            border-radius: 14px; color: white;
            font-family: 'JetBrains Mono', 'Fira Code', monospace;
            font-size: 1.35rem; font-weight: 700;
            letter-spacing: 4px; text-transform: uppercase;
            text-align: center; outline: none; transition: all 0.4s;
        }
        .vin-input::placeholder {
            color: rgba(255,255,255,0.18); letter-spacing: 2px; font-size: 0.95rem;
        }
        .vin-input:focus {
            border-color: var(--accent);
            background: rgba(0,180,216,0.06);
            box-shadow: 0 0 40px rgba(0,180,216,0.12), 0 0 0 4px rgba(0,180,216,0.08);
        }

        .photo-zone {
            border: 2px dashed rgba(255,255,255,0.1);
            border-radius: 14px; padding: 20px; text-align: center;
            cursor: pointer; transition: all 0.3s; margin: 20px 0 28px;
        }
        .photo-zone:hover {
            border-color: var(--accent); background: rgba(0,180,216,0.04);
        }
        .photo-zone .cam { font-size: 1.8rem; margin-bottom: 4px; }
        .photo-zone p { color: rgba(255,255,255,0.35); font-size: 0.82rem; }

        .btn-scan {
            width: 100%; padding: 18px; border: none; border-radius: 14px;
            font-family: 'Inter'; font-size: 1.1rem; font-weight: 800;
            cursor: pointer; transition: all 0.3s; position: relative; overflow: hidden;
        }
        .btn-scan.primary {
            background: linear-gradient(135deg, var(--accent), #0096b7);
            color: white;
        }
        .btn-scan.primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 30px rgba(0,180,216,0.35);
        }
        .btn-scan.gold {
            background: linear-gradient(135deg, var(--gold), var(--gold-dark));
            color: var(--primary); margin-top: 12px; font-size: 0.95rem;
        }
        .btn-scan .shimmer {
            position: absolute; top: 0; left: -100%; width: 100%; height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.15), transparent);
            animation: shimmer 3s infinite;
        }
        @keyframes shimmer { 100%{left:100%} }

        /* ========== LOADING ========== */
        .loading-screen {
            display: none; position: fixed; inset: 0;
            background: #060e1a; z-index: 3000;
            flex-direction: column; align-items: center;
            justify-content: center; padding: 40px 20px;
        }
        .loading-screen.active { display: flex; }

        .scanner-anim {
            width: 160px; height: 160px; position: relative;
            margin-bottom: 36px;
        }
        .ring-outer {
            position: absolute; inset: 0;
            border: 3px solid rgba(0,180,216,0.1);
            border-top: 3px solid var(--accent);
            border-radius: 50%;
            animation: spin 1.5s linear infinite;
        }
        .ring-middle {
            position: absolute; inset: 14px;
            border: 3px solid rgba(244,166,28,0.1);
            border-bottom: 3px solid var(--gold);
            border-radius: 50%;
            animation: spin 2s linear infinite reverse;
        }
        .ring-inner {
            position: absolute; inset: 28px;
            border: 3px solid rgba(42,157,143,0.1);
            border-top: 3px solid var(--green);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }
        .ring-center {
            position: absolute; inset: 42px;
            background: rgba(0,180,216,0.06);
            border-radius: 50%;
            display: flex; align-items: center; justify-content: center;
            font-size: 2rem; font-weight: 900; color: var(--accent);
            font-family: 'Inter';
        }
        @keyframes spin { to { transform: rotate(360deg); } }

        .loading-title {
            font-size: 1.4rem; font-weight: 800; color: white;
            margin-bottom: 6px; text-align: center;
        }
        .loading-vin {
            font-family: monospace; font-size: 1rem;
            color: var(--accent); font-weight: 700;
            letter-spacing: 3px; margin-bottom: 36px;
        }

        .steps-list { max-width: 460px; width: 100%; }
        .step-row {
            display: flex; align-items: center; gap: 14px;
            padding: 9px 0; opacity: 0.2; transition: all 0.6s;
        }
        .step-row.active { opacity: 1; }
        .step-row.done { opacity: 0.5; }
        .step-dot {
            width: 30px; height: 30px; border-radius: 50%;
            background: rgba(255,255,255,0.06); border: 2px solid rgba(255,255,255,0.1);
            display: flex; align-items: center; justify-content: center;
            font-size: 0.7rem; color: rgba(255,255,255,0.4);
            font-weight: 700; flex-shrink: 0; transition: all 0.5s;
        }
        .step-row.active .step-dot {
            background: var(--accent); border-color: var(--accent);
            color: white;
            box-shadow: 0 0 20px rgba(0,180,216,0.4);
            animation: pulse-dot 1.2s infinite;
        }
        .step-row.done .step-dot {
            background: var(--green); border-color: var(--green); color: white;
        }
        @keyframes pulse-dot {
            0%,100%{box-shadow:0 0 0 0 rgba(0,180,216,0.4)}
            50%{box-shadow:0 0 0 10px rgba(0,180,216,0)}
        }
        .step-text {
            color: rgba(255,255,255,0.4); font-size: 0.85rem;
            font-weight: 500; transition: all 0.5s;
        }
        .step-row.active .step-text { color: white; font-weight: 600; }

        .progress-track {
            max-width: 460px; width: 100%; height: 3px;
            background: rgba(255,255,255,0.06); border-radius: 3px;
            margin-top: 28px; overflow: hidden;
        }
        .progress-fill {
            height: 100%; width: 0%;
            background: linear-gradient(90deg, var(--accent), var(--gold), var(--green));
            border-radius: 3px; transition: width 0.6s ease;
        }
        .loading-percent {
            color: rgba(255,255,255,0.3); font-size: 0.8rem;
            margin-top: 10px; font-weight: 600;
        }

        /* ========== REPORT ========== */
        .report-page {
            display: none; padding: 90px 20px 60px;
        }
        .report-page.active { display: block; }

        .report-container { max-width: 860px; margin: 0 auto; }

        /* SUCCESS BANNER */
        .success-banner {
            text-align: center; margin-bottom: 40px;
        }
        .success-check {
            width: 72px; height: 72px; border-radius: 50%;
            background: linear-gradient(135deg, var(--green), #1a8a7e);
            display: flex; align-items: center; justify-content: center;
            font-size: 2rem; color: white; margin: 0 auto 16px;
            box-shadow: 0 8px 30px rgba(42,157,143,0.3);
        }
        .success-banner h2 {
            font-size: 1.6rem; font-weight: 800; margin-bottom: 6px; color: white;
        }
        .success-banner p { color: var(--text-light); font-size: 0.92rem; }

        /* REPORT DOCUMENT */
        .report-doc {
            background: rgba(255,255,255,0.03); border-radius: 24px; overflow: hidden;
            border: 1px solid rgba(255,255,255,0.06);
            box-shadow: 0 4px 60px rgba(0,0,0,0.3);
        }

        /* DOC HEADER */
        .doc-header {
            background: linear-gradient(135deg, var(--primary) 0%, #0d2137 60%, var(--primary-light) 100%);
            padding: 36px 40px; color: white;
            display: flex; align-items: center; justify-content: space-between;
            gap: 24px; flex-wrap: wrap; position: relative; overflow: hidden;
        }
        .doc-header::after {
            content: ''; position: absolute; right: -40px; top: -40px;
            width: 200px; height: 200px; border-radius: 50%;
            background: rgba(0,180,216,0.06);
        }
        .vehicle-info h3 {
            font-size: 1.6rem; font-weight: 900; margin-bottom: 4px;
        }
        .vehicle-info .sub {
            color: rgba(255,255,255,0.55); font-size: 0.88rem;
        }
        .vehicle-info .vin-tag {
            display: inline-block; margin-top: 8px;
            background: rgba(0,180,216,0.15); border: 1px solid rgba(0,180,216,0.25);
            padding: 4px 14px; border-radius: 8px;
            font-family: monospace; font-size: 0.78rem;
            color: var(--accent); letter-spacing: 2px; font-weight: 600;
        }

        /* SCORE GAUGE — Prestige Double Ring */
        .score-gauge {
            position: relative; z-index: 1;
            width: 160px; height: 160px;
            flex-shrink: 0;
        }
        .score-gauge svg { width: 100%; height: 100%; }
        .gauge-center {
            position: absolute; inset: 0;
            display: flex; flex-direction: column;
            align-items: center; justify-content: center;
            pointer-events: none;
        }
        .gauge-number {
            font-family: 'Space Grotesk', 'Inter', sans-serif;
            font-size: 2.2rem; font-weight: 900; color: white;
            line-height: 1;
            text-shadow: 0 0 15px rgba(0,180,216,0.3);
        }
        .gauge-label {
            font-size: 0.5rem; color: rgba(0,180,216,0.5);
            text-transform: uppercase; letter-spacing: 2px;
            margin-top: 2px; font-weight: 700;
        }
        .gauge-tag {
            margin-top: 4px; font-size: 0.6rem; font-weight: 800;
            color: var(--green); background: rgba(42,157,143,0.15);
            padding: 2px 10px; border-radius: 10px;
        }
        /* Needle animation */
        .gauge-needle {
            transform-origin: 115px 125px;
            animation: reportNeedle 3s ease-out forwards;
        }
        @keyframes reportNeedle {
            0% { transform: rotate(-120deg); }
            30% { transform: rotate(55deg); }
            50% { transform: rotate(30deg); }
            70% { transform: rotate(48deg); }
            85% { transform: rotate(40deg); }
            100% { transform: rotate(42deg); }
        }
        /* Conic ring spin */
        .gauge-conic-ring {
            animation: gaugeSpin 12s linear infinite;
            transform-origin: center;
        }
        @keyframes gaugeSpin { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }
        .gauge-conic-ring-2 {
            animation: gaugeSpin2 18s linear infinite;
            transform-origin: center;
        }
        @keyframes gaugeSpin2 { from { transform: rotate(0deg); } to { transform: rotate(-360deg); } }
        /* Pulse outer */
        .gauge-outer-ring {
            animation: gaugeRingPulse 4s ease-in-out infinite;
        }
        @keyframes gaugeRingPulse {
            0%, 100% { filter: drop-shadow(0 0 4px rgba(0,180,216,0.15)); }
            50% { filter: drop-shadow(0 0 10px rgba(0,180,216,0.3)) drop-shadow(0 0 20px rgba(244,166,28,0.1)); }
        }

        /* DOC BODY */
        .doc-body { padding: 36px 40px; }

        /* VERDICT */
        .verdict-bar {
            display: flex; align-items: center; gap: 16px;
            background: linear-gradient(135deg, rgba(42,157,143,0.06), rgba(42,157,143,0.02));
            border: 1px solid rgba(42,157,143,0.15);
            border-radius: 16px; padding: 20px 24px; margin-bottom: 32px;
        }
        .verdict-icon {
            width: 50px; height: 50px; border-radius: 50%;
            background: linear-gradient(135deg, var(--green), #1a8a7e);
            display: flex; align-items: center; justify-content: center;
            font-size: 1.5rem; color: white; flex-shrink: 0;
            box-shadow: 0 4px 15px rgba(42,157,143,0.25);
        }
        .verdict-content h4 {
            font-size: 1.05rem; font-weight: 800; color: var(--green);
            margin-bottom: 2px; text-shadow: 0 0 20px rgba(42,157,143,0.2);
        }
        .verdict-content p { font-size: 0.85rem; color: var(--text-light); }

        /* SECTION TITLES */
        .section-head {
            display: flex; align-items: center; gap: 10px;
            font-size: 0.95rem; font-weight: 800; margin-bottom: 16px;
            margin-top: 32px; color: white;
        }
        .section-head .ico {
            width: 32px; height: 32px; border-radius: 8px;
            display: flex; align-items: center; justify-content: center;
            font-size: 0.9rem;
        }
        .section-head .ico.blue { background: rgba(0,180,216,0.1); }
        .section-head .ico.green { background: rgba(42,157,143,0.1); }
        .section-head .ico.gold { background: rgba(244,166,28,0.1); }
        .section-head .ico.red { background: rgba(230,57,70,0.1); }

        /* DATA CARDS */
        .data-cards {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
            gap: 12px;
        }
        .d-card {
            background: rgba(255,255,255,0.04); border-radius: 14px;
            padding: 16px; transition: all 0.3s;
            border: 1px solid rgba(255,255,255,0.06);
        }
        .d-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 20px rgba(0,180,216,0.08);
            border-color: rgba(0,180,216,0.15);
        }
        .d-card .d-label {
            font-size: 0.65rem; font-weight: 700; text-transform: uppercase;
            letter-spacing: 0.5px; color: var(--text-light); margin-bottom: 4px;
        }
        .d-card .d-val {
            font-size: 1.05rem; font-weight: 800; color: white;
        }
        .d-val.ok { color: var(--green); }
        .d-val.warn { color: var(--gold-dark); }
        .d-val.bad { color: var(--red); }

        /* CHECK LIST */
        .check-list { list-style: none; margin-top: 8px; }
        .check-row {
            display: flex; align-items: flex-start; gap: 12px;
            padding: 10px 0; border-bottom: 1px solid rgba(255,255,255,0.04);
            transition: all 0.3s;
        }
        .check-row:last-child { border-bottom: none; }
        .check-row:hover { background: rgba(0,180,216,0.04); border-radius: 8px; padding-left: 8px; }
        .chk {
            width: 26px; height: 26px; border-radius: 50%;
            display: flex; align-items: center; justify-content: center;
            font-size: 0.72rem; font-weight: 800; flex-shrink: 0; margin-top: 2px;
        }
        .chk.pass { background: rgba(42,157,143,0.1); color: var(--green); }
        .chk.warn { background: rgba(244,166,28,0.1); color: var(--gold-dark); }
        .chk.fail { background: rgba(230,57,70,0.1); color: var(--red); }
        .check-text { font-size: 0.88rem; color: var(--text-light); }
        .check-text strong { font-weight: 700; color: white; }

        /* VALEUR BOX */
        .valeur-card {
            background: linear-gradient(135deg, rgba(244,166,28,0.05), rgba(0,180,216,0.05));
            border: 1px solid rgba(244,166,28,0.15);
            border-radius: 18px; padding: 28px; text-align: center;
            margin-top: 32px; position: relative; overflow: hidden;
        }
        .valeur-card::before {
            content: ''; position: absolute; top: -50%; right: -20%;
            width: 200px; height: 200px; border-radius: 50%;
            background: rgba(244,166,28,0.04);
        }
        .valeur-title {
            font-size: 0.72rem; font-weight: 700; text-transform: uppercase;
            letter-spacing: 1.5px; color: var(--text-light); margin-bottom: 8px;
        }
        .valeur-amount {
            font-size: 3rem; font-weight: 900; color: var(--gold);
            line-height: 1; position: relative; z-index: 1;
            text-shadow: 0 0 30px rgba(244,166,28,0.2);
        }
        .valeur-range {
            font-size: 0.85rem; color: var(--text-light); margin-top: 6px;
        }

        /* ENTRETIEN */
        .entretien-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(240px, 1fr));
            gap: 10px; margin-top: 12px;
        }
        .ent-card {
            background: rgba(255,255,255,0.04); border-radius: 12px;
            padding: 14px 16px; display: flex; align-items: center; gap: 12px;
            transition: all 0.3s; border: 1px solid rgba(255,255,255,0.06);
        }
        .ent-card:hover { transform: translateX(4px); }
        .ent-ico {
            width: 38px; height: 38px; border-radius: 10px;
            background: rgba(0,180,216,0.08);
            display: flex; align-items: center; justify-content: center;
            font-size: 1.1rem; flex-shrink: 0;
        }
        .ent-label { font-size: 0.82rem; font-weight: 700; color: white; }
        .ent-detail { font-size: 0.72rem; color: var(--text-light); }
        .ent-total {
            text-align: center; margin-top: 16px;
            font-size: 0.85rem; color: var(--text-light);
        }

        /* DISCLAIMER */
        .disclaimer {
            background: rgba(255,255,255,0.03); border-radius: 12px;
            padding: 16px 20px; margin-top: 32px;
            font-size: 0.73rem; color: var(--text-light); line-height: 1.7;
            border: 1px solid rgba(255,255,255,0.05);
        }

        /* DOWNLOAD BAR */
        .download-bar {
            padding: 28px 40px;
            border-top: 1px solid rgba(255,255,255,0.06);
            display: flex; align-items: center;
            justify-content: center; gap: 20px;
            flex-wrap: wrap;
        }
        .dl-btn {
            display: inline-flex; align-items: center; gap: 10px;
            padding: 16px 36px; border-radius: 14px;
            font-family: 'Inter'; font-size: 1rem; font-weight: 800;
            cursor: pointer; border: none; transition: all 0.3s;
            text-decoration: none;
        }
        .dl-btn.primary {
            background: linear-gradient(135deg, var(--accent), var(--accent-dark));
            color: white;
            box-shadow: 0 4px 20px rgba(0,180,216,0.2);
        }
        .dl-btn.primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 30px rgba(0,180,216,0.35);
        }
        .dl-btn.outline {
            background: transparent;
            border: 2px solid rgba(255,255,255,0.1); color: var(--text);
        }
        .dl-btn.outline:hover { border-color: var(--accent); color: var(--accent); }
        .dl-sub {
            text-align: center; margin-top: 8px;
            font-size: 0.78rem; color: var(--text-light); width: 100%;
        }

        /* FOOTER */
        .report-footer {
            text-align: center; padding: 32px 20px;
            font-size: 0.78rem; color: var(--text-light);
        }
        .report-footer a { color: var(--accent); text-decoration: none; font-weight: 600; }

        /* SCROLL PROGRESS */
        .scroll-progress {
            position: fixed; top: 0; left: 0; z-index: 9999;
            height: 3px; width: 0%;
            background: linear-gradient(90deg, var(--accent), var(--gold));
            box-shadow: 0 0 10px rgba(0,180,216,0.5);
        }

        /* REPORT PAGE BG */
        .report-page { background: var(--bg); }

        /* DOC BODY */
        .doc-body { color: var(--text); }

        /* ENT CARD HOVER GLOW */
        .ent-card:hover {
            transform: translateX(4px);
            border-color: rgba(0,180,216,0.15);
            box-shadow: 0 4px 16px rgba(0,180,216,0.06);
        }

        /* D-CARD LABEL */
        .d-card .d-label { color: var(--text-light); }

        /* VALEUR CARD DARK */
        .valeur-card {
            background: linear-gradient(135deg, rgba(244,166,28,0.06), rgba(0,180,216,0.04));
            border: 1px solid rgba(244,166,28,0.12);
        }
        .valeur-range { color: var(--text-light); }

        /* FOOTER DARK */
        .report-footer { color: var(--text-light); }

        /* RESPONSIVE */
        @media (max-width: 768px) {
            nav { padding: 0 12px; height: 56px; }
            .nav-right { display: none; }
            .nav-logo { font-size: 1.1rem; gap: 6px; }
            .nav-logo .logo-icon { width: 28px !important; height: 28px !important; }
            .scanner-hero { padding: 80px 14px 40px; }
            .scanner-header h1 { font-size: 1.4rem; }
            .scanner-header p { font-size: 0.82rem; }
            .scanner-header .badge { font-size: 0.68rem; padding: 5px 12px; }
            .glass-card { padding: 20px; border-radius: 18px; }
            .vin-input { font-size: 0.95rem; letter-spacing: 2px; padding: 14px 16px; }
            .btn-scan { padding: 14px; font-size: 0.95rem; }
            .btn-scan.gold { font-size: 0.82rem; }
            .photo-zone { padding: 14px; margin: 14px 0 20px; }
            .photo-zone .cam { font-size: 1.4rem; }
            .photo-zone p { font-size: 0.72rem; }
            .doc-header { padding: 20px; flex-direction: column; align-items: flex-start; gap: 16px; }
            .vehicle-info h3 { font-size: 1.2rem; }
            .vehicle-info .sub { font-size: 0.78rem; }
            .doc-body { padding: 20px; }
            .data-cards { grid-template-columns: 1fr 1fr; gap: 8px; }
            .d-card { padding: 12px; }
            .d-card .d-val { font-size: 0.9rem; }
            .d-card .d-label { font-size: 0.6rem; }
            .check-text { font-size: 0.8rem; }
            .chk { width: 22px; height: 22px; font-size: 0.65rem; }
            .entretien-grid { grid-template-columns: 1fr; gap: 8px; }
            .ent-card { padding: 10px 12px; }
            .ent-ico { width: 32px; height: 32px; font-size: 0.9rem; }
            .download-bar { padding: 16px; flex-direction: column; gap: 10px; }
            .dl-btn { width: 100%; justify-content: center; padding: 14px 24px; font-size: 0.9rem; }
            .score-gauge { width: 130px; height: 130px; }
            .gauge-number { font-size: 1.7rem; }
            .valeur-amount { font-size: 2rem; }
            .valeur-card { padding: 20px; }
            .success-banner h2 { font-size: 1.2rem; }
            .success-check { width: 56px; height: 56px; font-size: 1.5rem; }
            .verdict-bar { padding: 14px 16px; gap: 12px; }
            .verdict-icon { width: 40px; height: 40px; font-size: 1.2rem; }
            .verdict-content h4 { font-size: 0.9rem; }
            .verdict-content p { font-size: 0.78rem; }
            .section-head { font-size: 0.85rem; }
            .section-head .ico { width: 28px; height: 28px; font-size: 0.8rem; }
            .disclaimer { font-size: 0.68rem; padding: 12px 14px; }
            .report-footer { font-size: 0.7rem; }
            .loading-title { font-size: 1.1rem; }
            .loading-vin { font-size: 0.85rem; letter-spacing: 2px; }
            .scanner-anim { width: 120px; height: 120px; margin-bottom: 24px; }
            .step-text { font-size: 0.75rem; }
            .step-dot { width: 24px; height: 24px; font-size: 0.6rem; }
        }
        @media (max-width: 480px) {
            .data-cards { grid-template-columns: 1fr; }
            .scanner-header h1 { font-size: 1.2rem; }
            .glass-card { padding: 16px; }
            .vin-input { font-size: 0.85rem; letter-spacing: 1px; }
        }
    </style>
</head>
<body>

<div class="scroll-progress" id="scrollProgress"></div>
<canvas id="particles"></canvas>

<!-- NAV -->
<nav>
    <a href="index.html" class="nav-logo">
        <svg class="logo-icon" viewBox="0 0 230 230" fill="none" xmlns="http://www.w3.org/2000/svg" style="width: 40px; height: 40px;">
            <defs>
                <linearGradient id="navLO" x1="0" y1="0" x2="230" y2="230"><stop stop-color="#00b4d8"/><stop offset=".5" stop-color="#2a9d8f"/><stop offset="1" stop-color="#f4a61c"/></linearGradient>
                <linearGradient id="navLC" x1="0" y1="0" x2="230" y2="230"><stop stop-color="#00b4d8"/><stop offset=".25" stop-color="#2a9d8f"/><stop offset=".5" stop-color="#f4a61c"/><stop offset=".75" stop-color="#e63946"/><stop offset="1" stop-color="#00b4d8"/></linearGradient>
                <linearGradient id="navLA" x1="38" y1="167" x2="192" y2="28"><stop stop-color="#e63946"/><stop offset=".3" stop-color="#f4a61c"/><stop offset=".6" stop-color="#2a9d8f"/><stop offset="1" stop-color="#00b4d8"/></linearGradient>
            </defs>
            <circle cx="115" cy="115" r="108" fill="none" stroke="rgba(0,180,216,0.08)" stroke-width="1"/>
            <circle cx="115" cy="115" r="104" fill="#060a14" stroke="url(#navLC)" stroke-width="1.5"/>
            <circle cx="115" cy="115" r="100" fill="#060a14" stroke="url(#navLO)" stroke-width="3.5"/>
            <circle cx="115" cy="115" r="94" fill="none" stroke="url(#navLC)" stroke-width="1.5" opacity=".6"/>
            <circle cx="115" cy="115" r="88" fill="none" stroke="rgba(0,180,216,0.18)" stroke-width="1.5"/>
            <circle cx="115" cy="115" r="82" fill="#0a1222"/>
            <path d="M38 167 A88 88 0 1 1 192 167" fill="none" stroke="url(#navLA)" stroke-width="2.5" stroke-linecap="round" opacity=".45"/>
            <text x="115" y="105" text-anchor="middle" font-family="Space Grotesk,sans-serif" font-size="38" font-weight="800" fill="white" letter-spacing="-2">AV</text>
            <line x1="115" y1="125" x2="115" y2="48" stroke="#f4a61c" stroke-width="2" stroke-linecap="round" transform="rotate(50, 115, 125)"/>
            <circle cx="115" cy="125" r="6" fill="#1a2640" stroke="rgba(244,166,28,0.3)" stroke-width="1.5"/>
            <circle cx="115" cy="125" r="2.5" fill="#f4a61c"/>
            <g transform="translate(115,115)" opacity=".35">
                <line x1="0" y1="-101" x2="0" y2="-96" stroke="#00b4d8" stroke-width="1.5" stroke-linecap="round"/>
                <line x1="0" y1="-101" x2="0" y2="-96" stroke="#f4a61c" stroke-width="1.5" stroke-linecap="round" transform="rotate(90)"/>
                <line x1="0" y1="-101" x2="0" y2="-96" stroke="#f4a61c" stroke-width="1.5" stroke-linecap="round" transform="rotate(180)"/>
                <line x1="0" y1="-101" x2="0" y2="-96" stroke="#f4a61c" stroke-width="1.5" stroke-linecap="round" transform="rotate(270)"/>
            </g>
        </svg>
        Auto<span>Verif</span> QC
    </a>
    <div class="nav-right">
        <a href="index.html" class="nav-link">Plan d'affaires</a>
        <a href="index.html#prix" class="nav-badge">Tarification</a>
    </div>
</nav>

<!-- SCANNER -->
<section class="scanner-hero" id="scanner">
    <div class="glow-orb blue"></div>
    <div class="glow-orb gold"></div>
    <div class="scanner-wrap">
        <div class="scanner-header">
            <div class="badge"><span class="live-dot"></span> Systeme operationnel — 10 sources connectees</div>
            <h1>Verifiez n'importe quel<br>vehicule <span class="grad">en 30 secondes</span></h1>
            <p>Entrez un VIN ou prenez une photo. Notre AI analyse 10 bases de donnees instantanement.</p>
        </div>

        <div class="glass-card">
            <label class="input-label">Numero VIN (17 caracteres)</label>
            <input type="text" class="vin-input" id="vinInput" maxlength="17"
                   placeholder="Ex: 2HGFC2F59MH528491" value="2HGFC2F59MH528491">

            <div class="photo-zone" onclick="document.getElementById('photoFile').click()">
                <div class="cam">&#128247;</div>
                <p>Ou prenez une photo du VIN — detection automatique AI</p>
                <input type="file" id="photoFile" accept="image/*" style="display:none">
            </div>

            <button class="btn-scan primary" onclick="startScan()">
                <span class="shimmer"></span>
                &#128270; &nbsp;Analyser — $19.99
            </button>
            <button class="btn-scan gold" onclick="startScan()">
                &#9889; &nbsp;Demo gratuite — Voir un exemple de rapport
            </button>
        </div>
    </div>
</section>

<!-- LOADING -->
<div class="loading-screen" id="loadScreen">
    <div class="scanner-anim">
        <div class="ring-outer"></div>
        <div class="ring-middle"></div>
        <div class="ring-inner"></div>
        <div class="ring-center">AV</div>
    </div>
    <div class="loading-title">Analyse en cours...</div>
    <div class="loading-vin" id="loadVin">2HGFC2F59MH528491</div>

    <div class="steps-list">
        <div class="step-row" data-step="1"><div class="step-dot">1</div><div class="step-text">Decodage VIN — identification vehicule</div></div>
        <div class="step-row" data-step="2"><div class="step-dot">2</div><div class="step-text">Verification vol — base CPIC policiere</div></div>
        <div class="step-row" data-step="3"><div class="step-dot">3</div><div class="step-text">Rappels de securite — Canada + USA</div></div>
        <div class="step-row" data-step="4"><div class="step-dot">4</div><div class="step-text">Branding SAAQ — salvage / reconstruit</div></div>
        <div class="step-row" data-step="5"><div class="step-dot">5</div><div class="step-text">Odometre historique — detection fraude AI</div></div>
        <div class="step-row" data-step="6"><div class="step-dot">6</div><div class="step-text">Encheres salvage — Copart / IAAI</div></div>
        <div class="step-row" data-step="7"><div class="step-dot">7</div><div class="step-text">Liens financiers — RDPRM Quebec</div></div>
        <div class="step-row" data-step="8"><div class="step-dot">8</div><div class="step-text">Score de risque AI — analyse finale</div></div>
    </div>

    <div class="progress-track"><div class="progress-fill" id="progFill"></div></div>
    <div class="loading-percent" id="loadPct">0%</div>
</div>

<!-- REPORT -->
<section class="report-page" id="reportPage">
<div class="report-container">
    <div class="success-banner">
        <div class="success-check">&#10003;</div>
        <h2>Rapport genere avec succes</h2>
        <p>Analyse completee en 28 secondes — 10 sources verifiees — Score AI: <strong style="color:var(--green)">82/100</strong></p>
    </div>

    <div class="report-doc">
        <!-- HEADER -->
        <div class="doc-header">
            <div class="vehicle-info">
                <h3>Honda Civic EX 2021</h3>
                <p class="sub">Berline 4 portes — 2.0L 4 cyl. i-VTEC — CVT — Traction</p>
                <span class="vin-tag">2HGFC2F59MH528491</span>
            </div>
            <div class="score-gauge">
                <svg viewBox="0 0 230 230" fill="none">
                    <defs>
                        <linearGradient id="gLO" x1="0" y1="0" x2="230" y2="230"><stop stop-color="#00b4d8"/><stop offset=".5" stop-color="#2a9d8f"/><stop offset="1" stop-color="#f4a61c"/></linearGradient>
                        <linearGradient id="gLC" x1="0" y1="0" x2="230" y2="230"><stop stop-color="#00b4d8"/><stop offset=".25" stop-color="#2a9d8f"/><stop offset=".5" stop-color="#f4a61c"/><stop offset=".75" stop-color="#e63946"/><stop offset="1" stop-color="#00b4d8"/></linearGradient>
                        <linearGradient id="gLA" x1="38" y1="167" x2="192" y2="28"><stop stop-color="#e63946"/><stop offset=".3" stop-color="#f4a61c"/><stop offset=".6" stop-color="#2a9d8f"/><stop offset="1" stop-color="#00b4d8"/></linearGradient>
                    </defs>
                    <!-- Glow rings -->
                    <circle cx="115" cy="115" r="112" fill="none" stroke="rgba(0,180,216,0.06)" stroke-width="1"/>
                    <circle cx="115" cy="115" r="108" fill="none" stroke="rgba(244,166,28,0.04)" stroke-width="1"/>
                    <!-- Double conic (counter-rotate) -->
                    <circle class="gauge-conic-ring-2" cx="115" cy="115" r="104" fill="#060a14" stroke="url(#gLC)" stroke-width="1.5" opacity=".4"/>
                    <!-- Outer ring -->
                    <circle class="gauge-outer-ring" cx="115" cy="115" r="100" fill="#060a14" stroke="url(#gLO)" stroke-width="3.5"/>
                    <!-- Conic ring -->
                    <circle class="gauge-conic-ring" cx="115" cy="115" r="94" fill="none" stroke="url(#gLC)" stroke-width="1.5" opacity=".6"/>
                    <!-- Inner ring -->
                    <circle cx="115" cy="115" r="88" fill="none" stroke="rgba(0,180,216,0.18)" stroke-width="1.5"/>
                    <!-- Dial face -->
                    <circle cx="115" cy="115" r="82" fill="#0a1222"/>
                    <!-- Gauge arc -->
                    <path d="M38 167 A88 88 0 1 1 192 167" fill="none" stroke="url(#gLA)" stroke-width="2.5" stroke-linecap="round" opacity=".45"/>
                    <!-- Fine interior ticks -->
                    <g transform="translate(115,115)">
                        <line x1="0" y1="-78" x2="0" y2="-70" stroke="rgba(255,255,255,0.4)" stroke-width="1.5" stroke-linecap="round" transform="rotate(-120)"/>
                        <line x1="0" y1="-78" x2="0" y2="-73" stroke="rgba(255,255,255,0.15)" stroke-width="0.6" transform="rotate(-100)"/>
                        <line x1="0" y1="-78" x2="0" y2="-70" stroke="rgba(255,255,255,0.4)" stroke-width="1.5" stroke-linecap="round" transform="rotate(-80)"/>
                        <line x1="0" y1="-78" x2="0" y2="-73" stroke="rgba(255,255,255,0.15)" stroke-width="0.6" transform="rotate(-60)"/>
                        <line x1="0" y1="-78" x2="0" y2="-70" stroke="rgba(244,166,28,0.5)" stroke-width="1.5" stroke-linecap="round" transform="rotate(-40)"/>
                        <line x1="0" y1="-78" x2="0" y2="-73" stroke="rgba(255,255,255,0.15)" stroke-width="0.6" transform="rotate(-20)"/>
                        <line x1="0" y1="-78" x2="0" y2="-70" stroke="rgba(244,166,28,0.5)" stroke-width="1.5" stroke-linecap="round" transform="rotate(0)"/>
                        <line x1="0" y1="-78" x2="0" y2="-73" stroke="rgba(255,255,255,0.15)" stroke-width="0.6" transform="rotate(20)"/>
                        <line x1="0" y1="-78" x2="0" y2="-70" stroke="rgba(42,157,143,0.5)" stroke-width="1.5" stroke-linecap="round" transform="rotate(40)"/>
                        <line x1="0" y1="-78" x2="0" y2="-73" stroke="rgba(255,255,255,0.15)" stroke-width="0.6" transform="rotate(60)"/>
                        <line x1="0" y1="-78" x2="0" y2="-70" stroke="rgba(0,180,216,0.5)" stroke-width="1.5" stroke-linecap="round" transform="rotate(80)"/>
                        <line x1="0" y1="-78" x2="0" y2="-73" stroke="rgba(255,255,255,0.15)" stroke-width="0.6" transform="rotate(100)"/>
                        <line x1="0" y1="-78" x2="0" y2="-70" stroke="rgba(0,180,216,0.5)" stroke-width="1.5" stroke-linecap="round" transform="rotate(120)"/>
                    </g>
                    <!-- External ticks -->
                    <g transform="translate(115,115)" opacity=".35">
                        <line x1="0" y1="-101" x2="0" y2="-96" stroke="#00b4d8" stroke-width="1.5" stroke-linecap="round"/>
                        <line x1="0" y1="-101" x2="0" y2="-98" stroke="#00b4d8" stroke-width="0.5" transform="rotate(15)"/>
                        <line x1="0" y1="-101" x2="0" y2="-96" stroke="#00b4d8" stroke-width="1" transform="rotate(30)"/>
                        <line x1="0" y1="-101" x2="0" y2="-96" stroke="#f4a61c" stroke-width="1.5" stroke-linecap="round" transform="rotate(90)"/>
                        <line x1="0" y1="-101" x2="0" y2="-96" stroke="#f4a61c" stroke-width="1.5" stroke-linecap="round" transform="rotate(180)"/>
                        <line x1="0" y1="-101" x2="0" y2="-96" stroke="#f4a61c" stroke-width="1.5" stroke-linecap="round" transform="rotate(270)"/>
                    </g>
                    <!-- Needle -->
                    <g class="gauge-needle">
                        <line x1="115" y1="125" x2="115" y2="48" stroke="#f4a61c" stroke-width="1.5" stroke-linecap="round"/>
                        <circle cx="115" cy="125" r="7" fill="#1a2640" stroke="rgba(244,166,28,0.3)" stroke-width="1.5"/>
                        <circle cx="115" cy="125" r="2.5" fill="#f4a61c"/>
                    </g>
                </svg>
                <div class="gauge-center">
                    <div class="gauge-number" id="scoreNum">0</div>
                    <div class="gauge-label">AUTOVERIF SCORE</div>
                    <div class="gauge-tag">Fiable</div>
                </div>
            </div>
        </div>

        <div class="doc-body">
            <!-- VERDICT -->
            <div class="verdict-bar">
                <div class="verdict-icon">&#9989;</div>
                <div class="verdict-content">
                    <h4>Recommandation AI: ACHETER avec confiance</h4>
                    <p>Profil de risque faible. Aucun drapeau rouge critique. Historique coherent. Negociez le prix selon la valeur marchande estimee.</p>
                </div>
            </div>

            <!-- DATA -->
            <div class="section-head"><div class="ico blue">&#128202;</div> Donnees du vehicule</div>
            <div class="data-cards">
                <div class="d-card"><div class="d-label">Odometre</div><div class="d-val" id="odoVal">0 km</div></div>
                <div class="d-card"><div class="d-label">Proprietaires</div><div class="d-val">1</div></div>
                <div class="d-card"><div class="d-label">Branding SAAQ</div><div class="d-val ok">Aucun &#10003;</div></div>
                <div class="d-card"><div class="d-label">Vol (CPIC)</div><div class="d-val ok">Non recherche &#10003;</div></div>
                <div class="d-card"><div class="d-label">Liens RDPRM</div><div class="d-val ok">Aucun &#10003;</div></div>
                <div class="d-card"><div class="d-label">Province</div><div class="d-val">Quebec (QC)</div></div>
                <div class="d-card"><div class="d-label">Couleur</div><div class="d-val">Argent lunaire</div></div>
                <div class="d-card"><div class="d-label">Carburant</div><div class="d-val">Essence 7.1 L/100km</div></div>
            </div>

            <!-- CHECKS -->
            <div class="section-head"><div class="ico green">&#128737;</div> Verifications de securite (8/8)</div>
            <ul class="check-list">
                <li class="check-row"><span class="chk pass">&#10003;</span><span class="check-text"><strong>Odometre valide</strong> — Progression coherente: 47,832 km en 4 ans. Aucune anomalie.</span></li>
                <li class="check-row"><span class="chk pass">&#10003;</span><span class="check-text"><strong>Aucun branding salvage</strong> — Jamais declare perte totale par un assureur.</span></li>
                <li class="check-row"><span class="chk pass">&#10003;</span><span class="check-text"><strong>Vehicule non vole</strong> — Verification CPIC negative. VIN non recherche.</span></li>
                <li class="check-row"><span class="chk pass">&#10003;</span><span class="check-text"><strong>Aucun lien financier</strong> — Pas de dette ou privilege au RDPRM.</span></li>
                <li class="check-row"><span class="chk pass">&#10003;</span><span class="check-text"><strong>Pas d'encheres salvage</strong> — Aucune trace Copart, IAAI ou Bidfax.</span></li>
                <li class="check-row"><span class="chk warn">&#9888;</span><span class="check-text"><strong>1 rappel de securite</strong> — TC-2023-045: Systeme de freinage. <strong>Verifier avec Honda.</strong></span></li>
                <li class="check-row"><span class="chk pass">&#10003;</span><span class="check-text"><strong>Crash test: 5 etoiles</strong> — Excellent en collision frontale et laterale.</span></li>
                <li class="check-row"><span class="chk pass">&#10003;</span><span class="check-text"><strong>Plaintes: faible</strong> — 12 plaintes vs moyenne de 45 pour ce modele.</span></li>
            </ul>

            <!-- VALEUR -->
            <div class="valeur-card">
                <div class="valeur-title">Estimation valeur marchande AI</div>
                <div class="valeur-amount" id="valeurNum">$0</div>
                <div class="valeur-range">Fourchette: $22,800 — $26,200 (selon etat et region QC)</div>
            </div>

            <!-- ENTRETIEN -->
            <div class="section-head"><div class="ico gold">&#128295;</div> Calendrier d'entretien recommande</div>
            <p style="font-size:0.82rem;color:var(--text-light);margin-bottom:4px;">Honda Civic 2021 — 47,832 km</p>
            <div class="entretien-grid">
                <div class="ent-card"><div class="ent-ico">&#128167;</div><div><div class="ent-label">Huile moteur</div><div class="ent-detail">Prochain: 50,000 km (~$60-80)</div></div></div>
                <div class="ent-card"><div class="ent-ico">&#9881;</div><div><div class="ent-label">Freins avant</div><div class="ent-detail">Inspection: 50,000 km (~$250-400)</div></div></div>
                <div class="ent-card"><div class="ent-ico">&#127777;</div><div><div class="ent-label">Liquide refroidissement</div><div class="ent-detail">Remplacement: 60,000 km (~$100-150)</div></div></div>
                <div class="ent-card"><div class="ent-ico">&#128168;</div><div><div class="ent-label">Filtre a air</div><div class="ent-detail">Remplacement: 50,000 km (~$30-50)</div></div></div>
                <div class="ent-card"><div class="ent-ico">&#9889;</div><div><div class="ent-label">Bougies d'allumage</div><div class="ent-detail">Remplacement: 100,000 km (~$80-120)</div></div></div>
                <div class="ent-card"><div class="ent-ico">&#128258;</div><div><div class="ent-label">Fluide CVT</div><div class="ent-detail">Remplacement: 60,000 km (~$150-250)</div></div></div>
            </div>
            <p class="ent-total">Cout entretien estime prochains 20,000 km: <strong>$670 — $1,050</strong></p>

            <div class="disclaimer">
                <strong>Avertissement:</strong> Ce rapport est genere a titre indicatif. AutoVerif QC recommande toujours une inspection mecanique professionnelle avant l'achat. Donnees provenant de sources gouvernementales et publiques. AutoVerif QC n'est pas responsable des decisions d'achat basees sur ce rapport.
            </div>
        </div>

        <!-- DOWNLOAD -->
        <div class="download-bar">
            <button class="dl-btn primary" id="dlBtn" onclick="animDl()">
                &#128196; &nbsp;Telecharger le rapport PDF
            </button>
            <button class="dl-btn outline" onclick="resetAll()">
                &#8592; &nbsp;Analyser un autre vehicule
            </button>
            <p class="dl-sub">Rapport 4 pages — genere le 14 fevrier 2026 — AutoVerif QC + SeoParAI</p>
        </div>
    </div>

    <div class="report-footer">
        <p>Rapport genere par <strong>AutoVerif QC</strong> — Propulse par <a href="https://www.seoparai.com" target="_blank">SeoParAI</a></p>
        <p style="margin-top:4px;">10 sources | AI predictive | 100% quebecois</p>
    </div>
</div>
</section>

<script>
// ===== SCROLL PROGRESS =====
window.addEventListener('scroll', () => {
    const h = document.documentElement;
    const pct = (h.scrollTop / (h.scrollHeight - h.clientHeight)) * 100;
    document.getElementById('scrollProgress').style.width = pct + '%';
});

// ===== PARTICLES =====
(function(){
    const c = document.getElementById('particles');
    const ctx = c.getContext('2d');
    let w, h, dots = [];
    function resize(){ w = c.width = window.innerWidth; h = c.height = window.innerHeight; }
    resize(); window.addEventListener('resize', resize);
    const pCount = window.innerWidth <= 768 ? 25 : 60;
    for(let i = 0; i < pCount; i++){
        dots.push({
            x: Math.random()*w, y: Math.random()*h,
            r: Math.random()*1.5 + 0.3,
            dx: (Math.random()-0.5)*0.4,
            dy: (Math.random()-0.5)*0.4,
            o: Math.random()*0.3 + 0.05
        });
    }
    function draw(){
        ctx.clearRect(0,0,w,h);
        dots.forEach(d => {
            d.x += d.dx; d.y += d.dy;
            if(d.x < 0) d.x = w; if(d.x > w) d.x = 0;
            if(d.y < 0) d.y = h; if(d.y > h) d.y = 0;
            ctx.beginPath(); ctx.arc(d.x,d.y,d.r,0,Math.PI*2);
            ctx.fillStyle = `rgba(0,180,216,${d.o})`; ctx.fill();
        });
        // lines
        for(let i=0;i<dots.length;i++){
            for(let j=i+1;j<dots.length;j++){
                const dx=dots[i].x-dots[j].x, dy=dots[i].y-dots[j].y;
                const dist=Math.sqrt(dx*dx+dy*dy);
                if(dist < 120){
                    ctx.beginPath();
                    ctx.moveTo(dots[i].x,dots[i].y);
                    ctx.lineTo(dots[j].x,dots[j].y);
                    ctx.strokeStyle = `rgba(0,180,216,${0.04*(1-dist/120)})`;
                    ctx.stroke();
                }
            }
        }
        requestAnimationFrame(draw);
    }
    draw();
})();

// ===== SCAN =====
function startScan(){
    const vin = document.getElementById('vinInput').value || '2HGFC2F59MH528491';
    document.getElementById('loadVin').textContent = vin.toUpperCase();
    document.getElementById('loadScreen').classList.add('active');
    document.querySelector('.scanner-hero').style.display = 'none';

    const rows = document.querySelectorAll('.step-row');
    const fill = document.getElementById('progFill');
    const pct = document.getElementById('loadPct');
    let cur = 0;

    function next(){
        if(cur > 0){
            rows[cur-1].classList.remove('active');
            rows[cur-1].classList.add('done');
            rows[cur-1].querySelector('.step-dot').textContent = '✓';
        }
        if(cur < rows.length){
            rows[cur].classList.add('active');
            const p = Math.round((cur+1)/rows.length*100);
            fill.style.width = p + '%';
            pct.textContent = p + '%';
            cur++;
            setTimeout(next, 700 + Math.random()*500);
        } else {
            fill.style.width = '100%';
            pct.textContent = '100%';
            setTimeout(showReport, 500);
        }
    }
    setTimeout(next, 400);
}

// ===== GAUGE (Prestige logo — no canvas needed, CSS animated) =====

// ===== COUNT UP =====
function countUp(el, target, prefix, suffix, duration){
    const start = 0;
    const startTime = performance.now();
    function update(now){
        const elapsed = now - startTime;
        const progress = Math.min(elapsed / duration, 1);
        const eased = 1 - Math.pow(1 - progress, 3);
        const current = Math.round(start + (target - start) * eased);
        el.textContent = prefix + current.toLocaleString() + suffix;
        if(progress < 1) requestAnimationFrame(update);
    }
    requestAnimationFrame(update);
}

// ===== SHOW REPORT =====
function showReport(){
    document.getElementById('loadScreen').classList.remove('active');
    const rp = document.getElementById('reportPage');
    rp.classList.add('active');
    window.scrollTo({top: 0});

    // Needle animation is handled by CSS @keyframes reportNeedle

    // Count ups
    countUp(document.getElementById('scoreNum'), 82, '', '', 1200);
    countUp(document.getElementById('odoVal'), 47832, '', ' km', 1000);
    countUp(document.getElementById('valeurNum'), 24500, '$', '', 1400);

    // GSAP animate elements
    gsap.from('.success-check', {scale:0, duration:0.6, ease:'back.out(1.7)', delay:0.1});
    gsap.from('.success-banner h2', {y:20, opacity:0, duration:0.5, delay:0.3});
    gsap.from('.success-banner p', {y:20, opacity:0, duration:0.5, delay:0.4});
    gsap.from('.doc-header', {y:30, opacity:0, duration:0.6, delay:0.5});
    gsap.from('.verdict-bar', {x:-30, opacity:0, duration:0.5, delay:0.7});
    gsap.from('.d-card', {y:20, opacity:0, duration:0.4, stagger:0.06, delay:0.9});
    gsap.from('.check-row', {x:-20, opacity:0, duration:0.3, stagger:0.05, delay:1.2});
    gsap.from('.valeur-card', {scale:0.9, opacity:0, duration:0.5, delay:1.6});
    gsap.from('.ent-card', {y:15, opacity:0, duration:0.3, stagger:0.06, delay:1.8});
    gsap.from('.download-bar', {y:20, opacity:0, duration:0.5, delay:2.2});
}

// ===== DOWNLOAD ANIM =====
function animDl(){
    const btn = document.getElementById('dlBtn');
    btn.innerHTML = '&#9889; &nbsp;Preparation du PDF...';
    btn.style.opacity = '0.7';
    setTimeout(()=>{
        btn.innerHTML = '&#10003; &nbsp;Rapport telecharge!';
        btn.style.background = 'linear-gradient(135deg, var(--green), #1a8a7e)';
        btn.style.opacity = '1';
    }, 1500);
    setTimeout(()=>{
        btn.innerHTML = '&#128196; &nbsp;Telecharger le rapport PDF';
        btn.style.background = 'linear-gradient(135deg, var(--accent), var(--accent-dark))';
    }, 4000);
}

// ===== RESET =====
function resetAll(){
    document.getElementById('reportPage').classList.remove('active');
    document.querySelector('.scanner-hero').style.display = 'flex';
    document.querySelectorAll('.step-row').forEach((r,i) => {
        r.classList.remove('active','done');
        r.querySelector('.step-dot').textContent = i+1;
    });
    document.getElementById('progFill').style.width = '0%';
    document.getElementById('loadPct').textContent = '0%';
    window.scrollTo({top:0, behavior:'smooth'});
}
</script>
</body>
</html>
